<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<style>
    table,tr,th,td{
        border:2px solid blue;
        border-collapse: collapse;
        padding: 8px;
        text-align: center;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    body{
        background-image: url("https://images.unsplash.com/photo-1618172193763-c511deb635ca?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxzZWFyY2h8MjB8fGNvdmlkJTIwaW1hZ2VzfGVufDB8fDB8fA%3D%3D&auto=format&fit=crop&w=1000&q=60");
        background-size: cover;
        background-repeat: no-repeat;

    }
    h1{
        text-align: center;

    }
    .cases{
        /* height:500px;
        width: 500px;
        border: 2px solid blue;
        
        background-color: lightblue;
        border-radius:5%; */
        position: relative;
        justify-content: center;
        align-items: center;
        display: flex;

    }
    .cases1{
       
        height:500px;
        width: 500px;
        border: 2px solid blue;
        
        background-color: lightblue;
        border-radius:5%;
        position: absolute;
        top:50%;
        margin-top: 50px;
    }
    h1{
        background-image:linear-gradient(purple,skyblue);
        text-shadow:2px 2px 2px white;
    }
    h2{
        color: purple;
        text-align: left;
        margin-left: 20px;
    }
    span{
        color: blue;
        text-align: right;
        margin-left: 20px;
    }
    select{
        width:20%;
    }
</style>
<body>
    <h1>Covid Cases by fetching data using API.</h1>
    <div class="cases">
        <div class="cases1">
            <!-- <table id="mytable">
                <th>Sno.</th>
                <th>Country</th>
                <th>TotalRecovered</th>
                <th>Date</th>
            </table> -->
            <h1>Information</h1>
           <h2>Country : <span id="1"></span></h2><select id="sel"></select>
           <button onclick=""></button>
            <h2>Total Confirmed Cases :<span id="2"></span></h2>
            <h2>NewRecovered Cases : <span id="3"></span></h2>
            <h2>Total Recovered Cases : <span id="4"></span></h2>
            <h2>Country Code : <span id="5"></span></h2>
            <h2>Date : <span id="6"></span></h2>
        </div>
    </div>
    <script>
        const API_URL="https://api.covid19api.com/summary";
    //     function apiget(url){
    //         console.log("We are good to go");
    //         return new Promise((resolve,reject)=>{
    //             var request=new XMLHttpRequest();
    //             request.open("GET",url);
    //             request.send();
    //             request.onload=()=>{
    //                 console.log(request.response);
    //                 console.log(request.response);

    //                 if(request.status===200){
    //                     // console.log("Nice");
    //                     resolve(request.response);
    //                 }
    //                 else{
    //                     console.log("Bad Request");
    //                     reject('this');
    //                 }
    //             }

    //         });
    //     }
    //     var index=0;
    // apiget(API_URL).then((val)=>{return JSON.parse(val)}).then((re)=>{
    //     // function countriesName(coun){
    //         // console.log(re.countries[5]);
    //         // var select= document.getElementById("sel");
    //         // for(var i=0;i<=195;i++){
    //         //     var option=document.createElement("option");
    //         //     select.value=re.Countries[i].Country;
    //         //     option.innerText=re.Countries[i].Country;
    //         //     select.appendChild(option);
    //         // }
    //         // var k;
    //        return rr(re.Countries);
    //     //    for( var i=0;i<=195;i++){
    //     //     if(re.Countries[i].Country===t){ k=i; break;}
    //     //    }
    //         // displayData(re.Countries[x])
    //         console.log(x);
            
    //     }).then((r)=>displayData(r)).catch((err)=>console.log(err));
    // // apiget(API_URL).then((val)=>{return JSON.parse(val)}).then((re)=>countriesName(re.Countries)).catch((err)=>console.log(err));
    // //     for(var i=0;i<a;i++){

    // //     }
    // // //    onsole.log(apiget(API_URL)); c
    // //     for(var i=0;i<Countries.length;i++){
    // //         if(Countries[i]=="India")
    // //         {
    // //             apiget(API_URL).then((val)=>{return JSON.parse(val)}).then((re)=>displayData(re.Countries[0])).catch((err)=>console.log(err));
                
                
    // //         }
    // //     }
    // //    console.log(apiget(API_URL));
    // //    apiget(API_URL).then((val)=>{ return JSON.parse(val)}).then((re)=>displayData(re.Countries[0])).catch((err)=>console.log("Error"+err));
    // // apiget(API_URL).then((val)=>{return JSON.parse(val)}).then((re)=>displayData(re.Countries[0])).catch((err)=>console.log(err));
    // //    function displayData(serverdata){
    // //     console.log(serverdata);
       
    // function displayData(serverdata){
        
    //     var h1=document.getElementById("1");
    //     var h2=document.getElementById("2");
    //     var h3=document.getElementById("3");
    //     var h4=document.getElementById("4");
    //     var h5=document.getElementById("5");
    //     var h6=document.getElementById("6");

    //     h1.innerText=" "+serverdata.Country;
    //     h2.innerText=" "+serverdata.TotalConfirmed;
    //     h3.innerText=" "+serverdata.NewRecovered;
    //     h4.innerText=" "+serverdata.TotalRecovered;
    //     h5.innerText=" "+serverdata.CountryCode;
    //     h6.innerText=" "+serverdata.Date;

       

        //         console.log(serverdata);
        
        // for(var user of serverdata){
            // console.log("Entered");
            // let newtr=document.createElement("tr");

            // let newtd1=document.createElement("td");
            // let newtd2=document.createElement("td");
            // let newtd3=document.createElement("td");
            // let newtd4=document.createElement("td");
            // // // console.log(user.id);


            // newtd1.innerText=" "+serverdata.NewConfirmed; 
            // newtd2.innerText=" "+serverdata.Country;
            // newtd3.innerText=" "+serverdata.TotalRecovered;
            // newtd4.innerText=" "+serverdata.Date;


            // // // console.log(user.id);

            // newtr.appendChild(newtd1);
            // newtr.appendChild(newtd2);
            // newtr.appendChild(newtd3);
            // newtr.appendChild(newtd4);
            // document.getElementById("mytable").appendChild(newtr);
        // }
        // function countriesName(coun){
        //     console.log(countries[5]);
        //     var select= document.getElementById("sel");
        //     for(var i=0;i<195;i++){
        //         var option=document.createElement("option");
        //         option.innerText=coun[i].Country;
        //         select.appendChild(option);
        //     }
        // }
         function rr(){
            




            function apiget(url){
            console.log("We are good to go");
            return new Promise((resolve,reject)=>{
                var request=new XMLHttpRequest();
                request.open("GET",url);
                request.send();
                request.onload=()=>{
                    console.log(request.response);
                    console.log(request.response);

                    if(request.status===200){
                        // console.log("Nice");
                        resolve(request.response);
                    }
                    else{
                        console.log("Bad Request");
                        reject('this');
                    }
                }

            });
        }
        var select= document.getElementById("sel");
            for(var i=0;i<195;i++){
                var option=document.createElement("option");
                option.innerText=RE[i].Country;
                select.appendChild(option);
            }
           
            var x=document.getElementById("sel").selectedIndex;
        var index=0;
    apiget(API_URL).then((val)=>{return JSON.parse(val)}).then((re)=>{
        // function countriesName(coun){
            // console.log(re.countries[5]);
            // var select= document.getElementById("sel");
            // for(var i=0;i<=195;i++){
            //     var option=document.createElement("option");
            //     select.value=re.Countries[i].Country;
            //     option.innerText=re.Countries[i].Country;
            //     select.appendChild(option);
            // }
            // var k;
           return rr(re.Countries);
        //    for( var i=0;i<=195;i++){
        //     if(re.Countries[i].Country===t){ k=i; break;}
        //    }
            // displayData(re.Countries[x])
            console.log(x);
            
        }).then((r)=>displayData(r)).catch((err)=>console.log(err));
    // apiget(API_URL).then((val)=>{return JSON.parse(val)}).then((re)=>countriesName(re.Countries)).catch((err)=>console.log(err));
    //     for(var i=0;i<a;i++){

    //     }
    // //    onsole.log(apiget(API_URL)); c
    //     for(var i=0;i<Countries.length;i++){
    //         if(Countries[i]=="India")
    //         {
    //             apiget(API_URL).then((val)=>{return JSON.parse(val)}).then((re)=>displayData(re.Countries[0])).catch((err)=>console.log(err));
                
                
    //         }
    //     }
    //    console.log(apiget(API_URL));
    //    apiget(API_URL).then((val)=>{ return JSON.parse(val)}).then((re)=>displayData(re.Countries[0])).catch((err)=>console.log("Error"+err));
    // apiget(API_URL).then((val)=>{return JSON.parse(val)}).then((re)=>displayData(re.Countries[0])).catch((err)=>console.log(err));
    //    function displayData(serverdata){
    //     console.log(serverdata);
       
    function displayData(serverdata){
        
        var h1=document.getElementById("1");
        var h2=document.getElementById("2");
        var h3=document.getElementById("3");
        var h4=document.getElementById("4");
        var h5=document.getElementById("5");
        var h6=document.getElementById("6");

        h1.innerText=" "+serverdata.Country;
        h2.innerText=" "+serverdata.TotalConfirmed;
        h3.innerText=" "+serverdata.NewRecovered;
        h4.innerText=" "+serverdata.TotalRecovered;
        h5.innerText=" "+serverdata.CountryCode;
        h6.innerText=" "+serverdata.Date;

       

        //         console.log(serverdata);
        
        // for(var user of serverdata){
            // console.log("Entered");
            // let newtr=document.createElement("tr");

            // let newtd1=document.createElement("td");
            // let newtd2=document.createElement("td");
            // let newtd3=document.createElement("td");
            // let newtd4=document.createElement("td");
            // // // console.log(user.id);


            // newtd1.innerText=" "+serverdata.NewConfirmed; 
            // newtd2.innerText=" "+serverdata.Country;
            // newtd3.innerText=" "+serverdata.TotalRecovered;
            // newtd4.innerText=" "+serverdata.Date;


            // // // console.log(user.id);

            // newtr.appendChild(newtd1);
            // newtr.appendChild(newtd2);
            // newtr.appendChild(newtd3);
            // newtr.appendChild(newtd4);
            // document.getElementById("mytable").appendChild(newtr);
        }
        // function countriesName(coun){
        //     console.log(countries[5]);
        //     var select= document.getElementById("sel");
        //     for(var i=0;i<195;i++){
        //         var option=document.createElement("option");
        //         option.innerText=coun[i].Country;
        //         select.appendChild(option);
        //     }
        // }
            
           
        }


    </script>
</body>
</html>